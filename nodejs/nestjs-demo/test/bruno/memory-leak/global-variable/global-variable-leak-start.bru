meta {
  name: global-variable-leak-start
  type: http
  seq: 1
}

post {
  url: {{host}}/memory-leak/global-variable/start
  body: none
  auth: inherit
}

assert {
  res.status: eq 201
  res.body.success: eq true
  res.body.message: contains "Global variable leak started"
}

tests {
  test("Should start global variable leak successfully", function() {
    expect(res.status).to.equal(201);
    expect(res.body.success).to.be.true;
    expect(res.body.message).to.include("Global variable leak started");
    expect(res.body.stats).to.be.defined;
    expect(res.body.stats.count).to.equal(5000);
  });
}

settings {
  encodeUrl: true
}
