meta {
  name: global-variable-leak-status
  type: http
  seq: 5
}

get {
  url: {{host}}/memory-leak/global-variable/status
  body: none
  auth: none
}

assert {
  res.status: eq 200
  res.body.success: eq true
  res.body.stats: isDefined
}

tests {
  test("Should return global variable leak status", function() {
    expect(res.status).to.equal(200);
    expect(res.body.success).to.be.true;
    expect(res.body.stats).to.be.defined;
    expect(res.body.stats.count).to.be.a("number");
    expect(res.body.stats.totalSizeBytes).to.be.a("number");
  });
}
